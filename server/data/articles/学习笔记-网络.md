# 网络

## 浏览器进程和线程

浏览器启动时，最少启动四个进程：主进程、GPU 进程（3D 绘图）、网络进程（加载资源）、渲染进程

## 网络七层协议

### 物理层

主要利用传输介质为数据链路层提供物理连接，实现比特流的透明传输。

### 数据链路层

    传输单位为帧，它定义了在单个链路上如何传输数据。

### 网络层

对帧进行封装，传输单位为包，定义了端对端数据包的传输（IP）

### 传输层

提供端到端的可靠的差错控制和流量控制。保证报文的正确传输。（TCP 和 UDP）

### 会话层

组织和协调会话进程之间的通信，并对数据交换进行管理。

### 表示层

处理用户信息的表示问题，如编码、数据格式转换和加密解密。

### 应用层

该层的功能是直接向用户提供服务，完成用户希望在网络上完成的各种工作。（HTTP 和 FTP）

## TCP/IP 协议

### 子协议

HTTP 协议

### 四层模型

应用层（HTTP 协议）

传输层（TCP 协议）

网络层（IP 协议）

链路层（硬件部分）

## 应用层

### 典型应用服务

Web 服务（HTTP/HTTPS）、电子邮件（POP3、SMTP）、DNS 域名服务、IP 地址自动分配服务（DHCP）、文件传输（FTP）、远程登录服务（Telnet、STelnet）

### HTTP 服务器基本流程

1. TCP 连接建立
2. HTTP 请求报文
3. HTTP 响应报文
4. TCP 连接关闭

### HTTP 主要特征

C/S 模式、无连接（无需建立 HTTP 应用层会话连接）、高可靠性、无状态、简单快速

### HTTP 请求报文格式

包括：请求行（Request Line）、请求头部（Request Header）行、空行和实体主体（Entity Body）行四部分组成。

### HTTP 响应报文格式

包括：响应（Response）行、响应报头（Response Header）行、空行和实体主体（Entity Body）行

### HTTP1.0/1.1/2.0/3.0 有啥优缺点

1.0：非持久链接，不支持断点续传

1.1：持久链接，增加缓存，支持多请求串行（队头阻塞）

2.0：二进制分帧，多路复用，首部压缩，请求优先级，服务器推送

3.0：基于 UDP 开发，解决 TCP 队头阻塞问题

### 网络传输过程

1. 客户端发出请求
2. 应用层发送 http 请求报文
3. 传输层建立 TCP 连接，将报文分成报文段
4. 网络层根据请求的 ip 地址，进行处理并加上 MAC 地址后交给链路层
5. 链路层将数据送到请求的 ip 地址
6. 请求 ip 的服务器根据 IP,TCP,HTTP 协议对数据进行拼接等处理
7. 服务器收到请求

### DNS 服务

#### 含义

DNS 是和 http 一样位于应用层的协议，用于解析域名，DNS 协议提供通过域名查找 IP 地址或者 IP 地址反查域名的服务。一个域名可能对应多个 IP。

#### 原理

递归解析，DNS 客服端--->本地服务器（查 IP）--->根服务器（查顶级服务器地址）--->顶级服务器（查 IP）--->二级服务器（查 IP）--->权威服务器（查 IP），最后的查询结果由本地服务器（入口服务器）告诉 DNS 客户端。

### 状态码

1XX：信息状态类

2XX：成功类

3XX：重定向类

4XX：客户端错误类

5XX：服务端错误类

### 常见的网络攻击

#### XSS 攻击

##### 含义

跨站脚本攻击，指用户恶意向页面植入一段 JS 脚本，已达到盗取或篡改服务器数据的目的。

##### 解决方案

- 用户输入时过滤特殊字符
- 转码编译
- URL 编码

#### CSRF 攻击

##### 含义

跨站请求伪造，攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。

##### 解决方案

- 同源校验
- 使用 CSRFToken 检验
- 使用验证码校验

#### DDOS 攻击

##### 含义

分布式拒绝服务攻击，这是一种利用 TCP 协议缺陷，发送大量伪造的 TCP 连接请求，常用假冒的 IP 或 IP 号段来发送海量请求达到高并发攻击的方式。

##### 解决方案

- 超时释放，每一个连接超过一定的时长，不管是因为任何原因都会直接放弃对其的连接
- 限流防刷
- 服务器设置阈值告警

#### SQL 注入

##### 含义

把 SQL 命令伪装成正常的 HTTP 请求参数,传递到服务端,欺骗服务器最终执行恶意的 SQL 命令,达到入侵目的。

##### 解决方案

1.使用预编译语句；2.使用 ORM 框架；3.避免密码明文存放。
